# TLDRWP Action Hooks Documentation

TLDRWP provides several action hooks that allow developers to customize the TL;DR output at different points in the generation process. These hooks enable you to add custom content, modify the display, or integrate with other plugins.

## Available Action Hooks

### 1. `tldr_before_summary_heading`
**Location:** Before the "Key Insights" heading
**Parameters:** `$response`, `$article_id`, `$article_title`

Add content before the main TL;DR heading.

```php
add_action('tldr_before_summary_heading', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-custom-banner">Generated by AI</div>';
}, 10, 3);
```

### 2. `tldr_after_summary_heading`
**Location:** After the "Key Insights" heading
**Parameters:** `$response`, `$article_id`, `$article_title`

Add content immediately after the heading.

```php
add_action('tldr_after_summary_heading', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-reading-time">Estimated reading time: 2 minutes</div>';
}, 10, 3);
```

### 3. `tldr_before_summary_copy`
**Location:** Before the main TL;DR content
**Parameters:** `$response`, `$article_id`, `$article_title`

Add content before the AI-generated summary.

```php
add_action('tldr_before_summary_copy', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-disclaimer">This summary was generated by AI and may not capture all nuances.</div>';
}, 10, 3);
```

### 4. `tldr_after_summary_copy`
**Location:** After the main TL;DR content
**Parameters:** `$response`, `$article_id`, `$article_title`

Add content after the AI-generated summary.

```php
add_action('tldr_after_summary_copy', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-feedback">
        <p>Was this summary helpful? 
        <a href="#" onclick="rateSummary(1)">üëç</a> 
        <a href="#" onclick="rateSummary(0)">üëé</a></p>
    </div>';
}, 10, 3);
```

### 5. `tldr_summary_footer`
**Location:** After social sharing buttons (if enabled)
**Parameters:** `$response`, `$article_id`, `$article_title`

Add content at the very bottom of the TL;DR section.

```php
add_action('tldr_summary_footer', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-footer">
        <p>Generated on ' . date('F j, Y') . ' | 
        <a href="/privacy-policy">Privacy Policy</a></p>
    </div>';
}, 10, 3);
```

## Available Filter Hooks

### 1. `tldrwp_response`
**Purpose:** Modify the AI-generated response before display
**Parameters:** `$response`, `$article_id`, `$article_title`

```php
add_filter('tldrwp_response', function($response, $article_id, $article_title) {
    // Add custom formatting or content
    $response = '<div class="custom-wrapper">' . $response . '</div>';
    return $response;
}, 10, 3);
```

### 2. `tldrwp_heading`
**Purpose:** Modify the heading text
**Parameters:** `$heading` (default: "Key Insights")

```php
add_filter('tldrwp_heading', function($heading) {
    return 'TL;DR Summary';
}, 10, 1);
```

### 3. `tldrwp_summary_html`
**Purpose:** Modify the entire HTML structure
**Parameters:** `$html`, `$response`, `$social_sharing_html`

```php
add_filter('tldrwp_summary_html', function($html, $response, $social_sharing_html) {
    // Completely customize the HTML structure
    return '<div class="my-custom-tldr">' . $response . '</div>';
}, 10, 3);
```

## Complete Example

Here's a complete example that demonstrates multiple hooks working together:

```php
<?php
/**
 * TLDRWP Customization Example
 * Add this to your theme's functions.php or a custom plugin
 */

// Add a banner before the heading
add_action('tldr_before_summary_heading', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-ai-banner" style="background: #f0f8ff; padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 12px; color: #666;">
        ü§ñ AI-Generated Summary
    </div>';
}, 10, 3);

// Add reading time after heading
add_action('tldr_after_summary_heading', function($response, $article_id, $article_title) {
    $word_count = str_word_count(strip_tags($response));
    $reading_time = ceil($word_count / 200); // 200 words per minute
    
    echo '<div class="tldrwp-reading-time" style="font-size: 12px; color: #666; margin-bottom: 15px;">
        üìñ Estimated reading time: ' . $reading_time . ' minute' . ($reading_time > 1 ? 's' : '') . '
    </div>';
}, 10, 3);

// Add disclaimer before content
add_action('tldr_before_summary_copy', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-disclaimer" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 8px; border-radius: 4px; margin-bottom: 15px; font-size: 12px; color: #856404;">
        ‚ö†Ô∏è This is an AI-generated summary. Please read the full article for complete context.
    </div>';
}, 10, 3);

// Add feedback buttons after content
add_action('tldr_after_summary_copy', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-feedback" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px;">
        <p style="margin: 0; font-size: 14px;">Was this summary helpful?</p>
        <div style="margin-top: 8px;">
            <button onclick="rateTLDR(' . $article_id . ', 1)" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 3px; margin-right: 10px; cursor: pointer;">üëç Yes</button>
            <button onclick="rateTLDR(' . $article_id . ', 0)" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">üëé No</button>
        </div>
    </div>';
}, 10, 3);

// Add footer with timestamp
add_action('tldr_summary_footer', function($response, $article_id, $article_title) {
    echo '<div class="tldrwp-footer" style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee; font-size: 11px; color: #999;">
        Generated on ' . date('F j, Y \a\t g:i A') . ' | 
        <a href="/privacy-policy" style="color: #999;">Privacy Policy</a>
    </div>';
}, 10, 3);

// Modify the heading text
add_filter('tldrwp_heading', function($heading) {
    return 'üìã Quick Summary';
}, 10, 1);

// Add JavaScript for feedback functionality
add_action('wp_footer', function() {
    ?>
    <script>
    function rateTLDR(articleId, rating) {
        // Send rating to your analytics or feedback system
        console.log('TLDR Rating:', { articleId, rating });
        
        // Example: Send to Google Analytics
        if (typeof gtag !== 'undefined') {
            gtag('event', 'tldr_feedback', {
                'event_category': 'TLDR',
                'event_label': rating === 1 ? 'positive' : 'negative',
                'value': articleId
            });
        }
        
        // Disable buttons after rating
        const buttons = document.querySelectorAll('.tldrwp-feedback button');
        buttons.forEach(btn => btn.disabled = true);
        
        // Show thank you message
        const feedback = document.querySelector('.tldrwp-feedback');
        if (feedback) {
            feedback.innerHTML = '<p style="margin: 0; color: #28a745;">Thank you for your feedback!</p>';
        }
    }
    </script>
    <?php
});
```

## Integration with Analytics

You can use these hooks to integrate with analytics platforms:

```php
// Track TLDR generation with Google Analytics
add_action('tldr_after_summary_copy', function($response, $article_id, $article_title) {
    ?>
    <script>
    if (typeof gtag !== 'undefined') {
        gtag('event', 'tldr_generated', {
            'event_category': 'TLDR',
            'event_label': '<?php echo esc_js($article_title); ?>',
            'value': <?php echo $article_id; ?>
        });
    }
    </script>
    <?php
}, 10, 3);
```

## Best Practices

1. **Always escape output** when using `echo` in action hooks
2. **Use proper CSS classes** for styling to avoid conflicts
3. **Keep hooks lightweight** to maintain performance
4. **Test thoroughly** as hooks can affect the entire TL;DR display
5. **Use conditional logic** to show different content based on context

## Troubleshooting

If your action hooks aren't working:

1. Check that your code is loaded after TLDRWP
2. Verify the hook names are spelled correctly
3. Ensure your function has the correct number of parameters
4. Check for JavaScript errors in the browser console
5. Verify that the TL;DR content is being generated successfully

## Support

For questions about action hooks or customization, please refer to the TLDRWP documentation or create an issue on the plugin's GitHub repository. 